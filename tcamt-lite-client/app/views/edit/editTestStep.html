<style id="antiClickjack">
body {
	display: none !important;
}
</style>
<script type="text/javascript">
	if (self === top) {
		var antiClickjack = document.getElementById("antiClickjack");
		antiClickjack.parentNode.removeChild(antiClickjack);
	} else {
		top.location = self.location;
	}
</script>
<script type="text/ng-template" id="EditTestStepMetadata.html">
	<ul class="nav nav-pills">
		<li class="active"><a data-toggle="pill" ng-click="selectedTestStepTab = 1"><i class="fa fa-file-text-o fa-fw"></i> MetaData</a></li>
		<li><a data-toggle="pill" ng-click="selectedTestStepTab = 2"><i class="fa fa-file-text-o fa-fw"></i> Test Story</a></li>
		<li><a data-toggle="pill" ng-click="selectedTestStepTab = 3; initHL7EncodedMessageTab();"><i class="fa fa-file-text-o fa-fw"></i> HL7 Encoded Message</a></li>
		<li><a data-toggle="pill" ng-click="selectedTestStepTab = 4"><i class="fa fa-file-text-o fa-fw"></i> Test Data</a></li>
		<li><a data-toggle="pill" ng-click="selectedTestStepTab = 5"><i class="fa fa-file-text-o fa-fw"></i> Validation</a></li>
		<li><a data-toggle="pill" ng-click="selectedTestStepTab = 6"><i class="fa fa-file-text-o fa-fw"></i> STD/NIST XML</a></li>
		<li><a data-toggle="pill" ng-click="selectedTestStepTab = 7"><i class="fa fa-file-text-o fa-fw"></i> Supplement Documents</a></li>
	</ul>
  	
	<div ng-show="selectedTestStepTab == 1">
		<form name="testcasegroupMetaDataForm" class="form-horizontal" novalidate>
			<div class="row" style="margin:12px">
				<div class="col-md-2">
					<label class="control-label">Name:</label>
				</div>
				<div class="col-md-10">
					<input class="form-control" type="text" ng-change="recordChanged()" name="name" ng-model="selectedTestStep.name" required />
				</div>
			</div>
			<div class="row" style="margin:12px">
				<div class="col-md-2">
					<label class="control-label">Description:</label>
				</div>
				<div class="col-md-10">
					<input class="form-control" type="text" ng-change="recordChanged()" name="description" ng-model="selectedTestStep.description" required />
				</div>
			</div>
			<div class="row" style="margin:12px">
				<div class="col-md-2">
					<label class="control-label">Integration Profile:</label>
				</div>
				<div class="col-md-10">
					<select class="form-control" name="iProfile"
                            ng-change="recordChanged(); loadIntegrationProfile();"
                            required ng-model="selectedTestStep.integrationProfileId" ng-options="list.id as list.metadata.name + ' (' + list.metadata.profileID + ')'  for list in integrationProfileMetaDataList">
						<option value="">No integration profile</option>
					</select>
				</div>
			</div>

			<div ng-show="selectedIntegrationProfile" class="row" style="margin:12px">
				<div class="col-md-2">
					<label class="control-label">Conformance Profile:</label>
				</div>
				<div class="col-md-10">
					<select class="form-control" name="cProfile"
                            ng-change="recordChanged(); loadConformanceProfile();"
                            required ng-model="selectedTestStep.conformanceProfileId" ng-options="message.messageID as message.messageType + '-' + message.event + '-' + message.structID + ' (' + message.messageID + ')'  for message in selectedIntegrationProfile.messages.children">
						<option value="">No conformance profile</option>
					</select>
				</div>
			</div>
		</form>
	</div>

    <div ng-show="selectedTestStepTab == 2">
		<div class="row" style="margin:10px">
			<div class="col-md-12">
				<div class="form-group">
					<label class="control-label">Description</label>
					<textarea froala ng-model="myHtml" type="text" ng-change="recordChanged()" name="teststorydesc" ng-model="selectedTestStep.testStepStory.teststorydesc"></textarea>
				</div>
			</div>
				
			<div class="col-md-12">
				<div class="form-group">
					<label class="control-label">Comments</label>
					<textarea froala  ng-change="recordChanged()" name="comments" ng-model="selectedTestStep.testStepStory.comments" required ></textarea>
				</div>
			</div>
				
			<div class="col-md-12">
				<div class="form-group">
					<label class="control-label">Pre Condition</label>
					<textarea froala   ng-change="recordChanged()" name="preCondition" ng-model="selectedTestStep.testStepStory.preCondition" required ></textarea>
				</div>
			</div>
				
			<div class="col-md-12">
				<div class="form-group">
					<label class="control-label">Post Condition</label>
					<textarea froala  ng-change="recordChanged()" name="postCondition" ng-model="selectedTestStep.testStepStory.postCondition" required ></textarea>
				</div>
			</div>
				
			<div class="col-md-12">
				<div class="form-group">
					<label class="control-label">Test Objectives</label>
					<textarea froala  ng-change="recordChanged()" name="testObjectives" ng-model="selectedTestStep.testStepStory.testObjectives" required></textarea>
				</div>
			</div>
				
			<div class="col-md-12">
				<div class="form-group">
					<label class="control-label">Evaluation Criteria</label>
					<textarea froala  ng-change="recordChanged()" name="evaluationCriteria" ng-model="selectedTestStep.testStepStory.evaluationCriteria" required ></textarea>
				</div>
			</div>
				
			<div class="col-md-12">
				<div class="form-group">
					<label class="control-label">Notes</label>
					<textarea froala ng-change="recordChanged()" name="notes" ng-model="selectedTestStep.testStepStory.notes" required />
				</div>
			</div>
		</div>
	</div>

	<div ng-show="selectedTestStepTab == 4">
		<div class="row">
        	<accordion close-others="false">
            	<accordion-group is-open="testDataAccordi.segmentList" panel-class="panel-primary">
                	<accordion-heading>
                    	<i class="fa fa-file-text-o fa-fw"></i> Segments List
                	</accordion-heading>
                	<div class="col-md-12">
                		<div class="table-responsive">
                    		<table class="table table-striped table-bordered">
                        		<thead>
                        			<tr class="tbl-header">
										<th class="col-md-4">Path</th>
                            			<th class="col-md-5">Line</th>
                            			<th class="col-md-2">Usage</th>
										<th class="col-md-1">Action</th>
                        			</tr>
                        		</thead>
                        		<tbody>
                        			<tr ng-repeat="segment in segmentList">
                            			<td class="col-md-4">
											{{segment.iPath}}
                            			</td>
										<td class="col-md-5">
											{{segment.segmentStr}}
                            			</td>
										<td class="col-md-2">
											{{segment.usagePath}}
                            			</td>
										<td class="col-md-1">
											<button title="Select Segment"
                                    			type="button" class="btn btn-primary btn-xs" ng-click="selectSegment(segment)">
                                        			<span><i class="fa fa-pencil fa-fw"></i> Select</span>
                            				</button>
                            			</td>
                        			</tr>
                        		</tbody>
                    		</table>
                		</div>
            		</div>
            	</accordion-group>

	            <accordion-group is-open="testDataAccordi.selectedSegment" panel-class="panel-primary">
    	            <accordion-heading>
                    	<i class="fa fa-file-text-o fa-fw"></i> Selected Segment
                	</accordion-heading>
                	<div class="col-md-12">
                		<div class="table-responsive">
                    		<table class="table table-striped table-bordered">
                        		<thead>
                        			<tr class="tbl-header">
										<th class="col-md-1">Path</th>
                            			<th class="col-md-3">Name</th>
                            			<th class="col-md-2">DT</th>
										<th class="col-md-1">Usage</th>
										<th class="col-md-2">Value</th>
										<th class="col-md-2">Test Data Cate.</th>
										<th class="col-md-1">Action</th>
                        			</tr>
                        		</thead>
                        		<tbody>
                        			<tr ng-repeat="node in selectedSegmentNode.children">
                            			<td class="col-md-1">
											{{node.iPath}}
                            			</td>
										<td class="col-md-3">
											{{node.field.name}}
                            			</td>
										<td class="col-md-2">
											{{node.dt.label}}
                            			</td>
										<td class="col-md-1">
											{{node.field.usage}}
                            			</td>
										<td class="col-md-2">
											{{node.value}}
                            			</td>
										<td class="col-md-1">
											<select class="form-control" name="testDataCate">
												<option value="">Select one</option>
												<option value="Indifferent">Indifferent</option>
												<option value="Presence-Content-Indifferent">Presence-Content-Indifferent</option>
												<option value="....">....</option>
											</select>
                            			</td>
										<td class="col-md-1">
											-
                            			</td>
                        			</tr>
                        		</tbody>
                    		</table>
                		</div>
            		</div>
            	</accordion-group>
            	
            	<accordion-group is-open="testDataAccordi.constraintList" panel-class="panel-primary">
    	            <accordion-heading>
                    	<i class="fa fa-file-text-o fa-fw"></i> Constraints List
                	</accordion-heading>
                	<div>
                	</div>
            	</accordion-group>
        	</accordion>
        </div>
	</div>

	<div ng-show="selectedTestStepTab == 3">
		<textarea class="lined form-control" rows="20" ng-model="selectedTestStep.er7Message" ng-change="updateMessage();" />
		<script>
			    	$(function() {
			$(".lined").linedtextarea(
				{selectedLine: 1}
			);
		});
		</script>
	</div>
</script>