<style id="antiClickjack">body {
    display: none !important;
}</style>
<script type="text/javascript">
    if (self === top) {
        var antiClickjack = document.getElementById("antiClickjack");
        antiClickjack.parentNode.removeChild(antiClickjack);
    } else {
        top.location = self.location;
    };
</script>
<div class="container" ng-controller="ProfileCtrl" ng-init="initProfiles()">
    <div ng-show="isAuthenticated()">
        <div ng-show="!isPending()">
            <div class="row">
                <div ng-cloak>
                    <md-content>
                        <md-tabs md-dynamic-height md-border-bottom>
                            <md-tab label="My Profiles">
                                <md-content class="md-padding">
                                    <div class="col-md-12">
                                        <div class="pull-right">
                                            <button type="button" class="btn btn-info btn-sm" ng-click="openDialogForImportXMLProfile($event);"><i class="fa fa-plus"></i>
                                                Import Profile
                                            </button>
                                        </div>
                                        <table st-table="tmpPrivateProfiles" st-safe-src="privateProfiles" class="smart-table table table-striped table-bordered">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th st-ratio="5">#</th>
                                                <th st-ratio="10" st-sort="integrationProfileMetaData.name">Profile XML Name</th>
                                                <th st-ratio="10">Constraints XML name</th>
                                                <th st-ratio="10">ValueSet XML name</th>
                                                <th st-ratio="10" st-sort="integrationProfileMetaData.hl7Version">HL7Version</th>
                                                <th st-ratio="10" st-sort="date">Uploaded Date</th>
                                                <th st-ratio="45">Conformance Profiles</th>
                                                <th st-ratio="10">Actions</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="row in tmpPrivateProfiles | orderBy:'row.metaData.date'">
                                                <td st-ratio="5">{{$index + 1}}</td>
                                                <td st-ratio="10" ng-bind="row.integrationProfileMetaData.name"></td>
                                                <td st-ratio="10" ng-bind="row.conformanceContextMetaData.name"></td>
                                                <td st-ratio="10" ng-bind="row.valueSetLibraryMetaData.name"></td>
                                                <td st-ratio="10" ng-bind="row.integrationProfileMetaData.hl7Version"></td>
                                                <td st-ratio="10">{{row.lastUpdatedDate | date:dateFormat}}</td>
                                                <td st-ratio="45">
                                                    <li ng-repeat="m in row.conformanceProfileMetaDataSet">{{m.name}} [{{m.type}}^{{m.event}}^{{m.structId}}, {{m.identifier}}]</li>
                                                </td>
                                                <td st-ratio="10">
                                                    <button title="Replace Profile"
                                                            type="button" class="btn btn-xs btn-info no-margin"
                                                            ng-click="openDialogForReplacePrivateProfile($event, row);">
                                                        <span><i class="fa fa-repeat fa-fw"></i> Update</span>
                                                    </button>
                                                    <button title="Delete" type="button" class="btn btn-xs btn-danger no-margin"
                                                            ng-click="confirmDeletePrivateProfile($event, row)">
                                                        <span><i class="fa fa-trash-o fa-fw"></i> Delete</span>
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </md-content>
                            </md-tab>
                            <md-tab label="Public Profiles">
                                <md-content class="md-padding">
                                    <div class="col-md-12">
                                        <div class="pull-right">
                                            <button type="button" class="btn btn-info btn-sm" ng-if="isAdmin()" ng-click="openDialogForImportXMLPublicProfile($event);"><i class="fa fa-plus"></i>
                                                Import Profile
                                            </button>
                                        </div>
                                        <table st-table="tmpPublicProfiles" st-safe-src="publicProfiles" class="smart-table table table-striped table-bordered">
                                            <thead>
                                            <tr class="tbl-header">
                                                <th st-ratio="5">#</th>
                                                <th st-ratio="10" st-sort="integrationProfileMetaData.name">Profile XML Name</th>
                                                <th st-ratio="10">Constraints XML name</th>
                                                <th st-ratio="10">ValueSet XML name</th>
                                                <th st-ratio="10" st-sort="integrationProfileMetaData.hl7Version">HL7Version</th>
                                                <th st-ratio="10" st-sort="date">Uploaded Date</th>
                                                <th st-ratio="45">Conformance Profiles</th>
                                                <th st-ratio="10" ng-if="isAdmin()">Actions</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="row in tmpPublicProfiles | orderBy:'row.metaData.date'">
                                                <td st-ratio="5">{{$index + 1}}</td>
                                                <td st-ratio="10" ng-bind="row.integrationProfileMetaData.name"></td>
                                                <td st-ratio="10" ng-bind="row.conformanceContextMetaData.name"></td>
                                                <td st-ratio="10" ng-bind="row.valueSetLibraryMetaData.name"></td>
                                                <td st-ratio="10" ng-bind="row.integrationProfileMetaData.hl7Version"></td>
                                                <td st-ratio="10">{{row.lastUpdatedDate | date:dateFormat}}</td>
                                                <td st-ratio="45">
                                                    <li ng-repeat="m in row.conformanceProfileMetaDataSet">{{m.name}} [{{m.type}}^{{m.event}}^{{m.structId}}, {{m.identifier}}]</li>
                                                </td>
                                                <td st-ratio="10" ng-if="isAdmin()">
                                                    <button title="Replace Profile"
                                                            type="button" class="btn btn-xs btn-info no-margin"
                                                            ng-click="openDialogForReplacePublicProfile($event, row);">
                                                        <span><i class="fa fa-repeat fa-fw"></i> Update</span>
                                                    </button>
                                                    <button title="Delete" type="button" class="btn btn-xs btn-danger no-margin"
                                                            ng-click="confirmDeletePublicProfile($event, row)">
                                                        <span><i class="fa fa-trash-o fa-fw"></i> Delete</span>
                                                    </button>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </md-content>
                            </md-tab>
                        </md-tabs>
                    </md-content>
                </div>
            </div>
        </div>

        <div style="font-size: 18px;text-align: center" ng-show="isPending()">
            <div msg key='account.pendingSection'></div>
        </div>

    </div>

    <div ng-show="!isAuthenticated()" style="font-size: 18px;text-align: center">
        <p>Please <a href="" ng-click="loginReq()"><i class="fa fa-sign-in"></i>&nbsp;login</a> to access this page. You
            can also <a href="#/registration"><i class="fa fa-chevron-circle-right"></i>&nbsp;register</a></p>
    </div>
</div>
